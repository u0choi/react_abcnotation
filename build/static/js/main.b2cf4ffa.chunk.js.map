{"version":3,"sources":["Editor.js","Score.js","Preview.js","App.js","index.js"],"names":["Score","notation","id","onEvent","isPlaying","bpm","onClick","console","log","Preview","value","components","code","node","inline","className","children","props","match","exec","uniqid","replace","synth","Tone","toDestination","App","setValue","useState","setPlaying","useEffect","event","notes","forEach","n","triggerAttackRelease","name","duration","rootElement","document","getElementById","ReactDOM","render"],"mappings":"wMAMe,I,yBCJA,SAASA,EAAT,GAAsD,IAAvC,SAAEC,EAAF,GAAYC,EAAZ,QAAgBC,EAAhB,UAAyBC,GAAa,EAClE,OACE,cAAC,IAAD,CACEH,SAAUA,EACVC,GAAIA,EACJE,UAAWA,EACXD,QAASA,EACTE,IAAK,GACLC,QAAS,IAAIC,QAAQC,IAAI,WAAWN,K,qBCN3B,SAASO,EAAT,GAAiD,IAAhC,MAAEC,EAAF,QAASP,EAAT,UAAkBC,GAAa,EAC7D,MAAMO,EAAa,CACjBC,KAAK,GAAkD,IAAlD,KAAEC,EAAF,OAAQC,EAAR,UAAgBC,EAAhB,SAA2BC,KAAaC,GAAS,EACpD,MAAMC,EAAQ,iBAAiBC,KAAKJ,GAAa,IACjD,OAAQD,GAAUI,GAAsB,QAAbA,EAAM,GAC/B,cAAClB,EAAD,CACEE,GAAIkB,MACJnB,SAAU,UAAGe,GAAWK,QAAQ,MAAO,IACvClB,QAASA,EACTC,UAAWA,IAGb,sBAAMW,UAAWA,KAAeE,MAKtC,OACE,cAAC,IAAD,CAAeF,UAAU,UAAUJ,WAAYA,EAA/C,SACGD,I,OCdP,MAWMY,EAAQ,IAAIC,IAAeA,KAAYC,gBAE9B,SAASC,IACtB,MAAOf,EAAOgB,GAAYC,mBAdV,+NAeTvB,EAAWwB,GAAcD,oBAAS,GAuBzC,OAnBAE,qBAAU,KACRD,GAAW,KACV,CAAClB,IAkBF,qBAAKK,UAAU,MAAf,SAEE,sBAAKA,UAAU,kBAAf,UACE,cAACN,EAAD,CAASC,MAAOA,EAAOP,QApB7B,SAAiB2B,GACVA,GAGLA,EAAMC,MAAMC,SAASC,IACnBX,EAAMY,qBAAqBD,EAAEE,KAAMF,EAAEG,cAeMhC,UAAWA,IACpD,iCACE,wBAAQE,QAVhB,WACEsB,GAAYxB,IASN,yBChDV,MAAMiC,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP,cAAC,aAAD,UACE,cAAChB,EAAD,MAEFY,K","file":"static/js/main.b2cf4ffa.chunk.js","sourcesContent":["import Editor from \"@monaco-editor/react\";\n\nconst options = {\n  codeLens: false\n};\n\nexport default function ({ onEditorChange, defaultValue }) {\n  return (\n    <div className=\"editor\">\n      <Editor\n        height=\"100vh\"\n        defaultLanguage=\"markdown\"\n        theme=\"vs-dark\"\n        options={options}\n        defaultValue={defaultValue}\n        onChange={onEditorChange}\n      />\n    </div>\n  );\n}\n","import SheetMusic from \"@slnsw/react-sheet-music\";\n\nexport default function Score({ notation, id, onEvent, isPlaying }) {\n  return (\n    <SheetMusic\n      notation={notation}\n      id={id}\n      isPlaying={isPlaying}\n      onEvent={onEvent}\n      bpm={70}\n      onClick={()=>console.log('clicked '+id)}\n      \n    />\n  );\n}\n","import ReactMarkdown from \"react-markdown\";\nimport Score from \"./Score\";\nimport uniqid from \"uniqid\";\n\nexport default function Preview({ value, onEvent, isPlaying }) {\n  const components = {\n    code({ node, inline, className, children, ...props }) {\n      const match = /language-(\\w+)/.exec(className || \"\");\n      return !inline && match && match[1] === \"abc\" ? (\n        <Score\n          id={uniqid()}\n          notation={`${children}`.replace(/\\n$/, \"\")}\n          onEvent={onEvent}\n          isPlaying={isPlaying}\n        />\n      ) : (\n        <code className={className} {...props} />\n      );\n    }\n  };\n\n  return (\n    <ReactMarkdown className=\"preview\" components={components}>\n      {value}\n    </ReactMarkdown>\n  );\n}\n","import { useState, useEffect } from \"react\";\n\nimport * as Tone from \"tone\";\n\nimport Editor from \"./Editor\";\nimport Preview from \"./Preview\";\n\nimport \"./styles.css\";\n\nconst defaultValue = `# Sample\n\n\\`\\`\\`abc\nX: 1\nM: 6/4\nK: Am\n|Ccea|[^Gb],ecb|[Gc']ecc'|[^F^f]dA^f|[eF]cAc-|cecA|[B,GB][A,Ac][A,Ac]4|\n|Acea|[^Gb],ecb|[Gc']ecc'|[^F^f]dA^f|[eF]cAc-|cecA|[B,GB][A,Ac][A,Ac]4|\n[B,GB][^Gb][^Gb]|Acea|cccd\n\\`\\`\\``;\n\nconst synth = new Tone.PolySynth(Tone.Synth).toDestination();\n\nexport default function App() {\n  const [value, setValue] = useState(defaultValue);\n  const [isPlaying, setPlaying] = useState(false);\n  function onEditorChange(value, event) {\n    setValue(value);\n  }\n  useEffect(() => {\n    setPlaying(false);\n  }, [value]);\n  function onEvent(event) {\n    if (!event) {\n      return;\n    }\n    event.notes.forEach((n) => {\n      synth.triggerAttackRelease(n.name, n.duration);\n\n    });\n    \n\n  }\n\n  function play() {\n    setPlaying(!isPlaying);\n  }\n\n  return (\n    <div className=\"App\">\n      {/* <Editor onEditorChange={onEditorChange} defaultValue={defaultValue} /> */}\n      <div className=\"preview-wrapper\">\n        <Preview value={value} onEvent={onEvent} isPlaying={isPlaying} />\n        <footer>\n          <button onClick={play}>Play</button>\n        </footer>\n      </div>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}